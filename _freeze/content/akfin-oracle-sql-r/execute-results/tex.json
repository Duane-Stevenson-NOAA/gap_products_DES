{
  "hash": "883f256bc4a3d616263cf4cb01e9d371",
  "result": {
    "markdown": "---\ntitle: Accessing Data\n---\n\n\n\n\n\n## Access data via Oracle (AFSC only)\n\nAFSC `Oracle` users can access the database via `SQL developer` to view and pull the production data directly from the `GAP_PRODUCTS` `Oracle` schema. The user can also use `SQL developer` to view and pull the GAP Products data directly from the `GAP_PRODUCTS` `Oracle` schema. \n\n### Connect to Oracle from R\n\nMany users will want to access the data from `Oracle` using `R`. The user will need to install the `RODBC` `R` package and ask OFIS (IT) connect `R` to `Oracle`. Then, use the following code in `R` to establish a connection from `R` to `Oracle`: \n\nHere, the user can establish the oracle connection by entering their username and password in the `channel <- gapindex::oracle_connect()` function. Never save usernames or passwords in scripts that may be intentionally or unintentionally shared with others. If no username and password is entered in the function, pop-ups will appear on the screen asking for the username and password. \n\n## Data SQL Query Examples: \n\n### Ex. 0: Select all data from a table\n\nYou can download all of the tables locally using a variation of the code below. Once connected, pull and save the tables of interest into the `R` environment. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlocations <- c(\n  \"GAP_PRODUCTS.AKFIN_AGECOMP\", \n  \"GAP_PRODUCTS.AKFIN_AREA\", \n  \"GAP_PRODUCTS.AKFIN_BIOMASS\", \n  \"GAP_PRODUCTS.AKFIN_CATCH\", \n  \"GAP_PRODUCTS.AKFIN_CPUE\", \n  \"GAP_PRODUCTS.AKFIN_CRUISE\", \n  \"GAP_PRODUCTS.AKFIN_HAUL\", \n  \"GAP_PRODUCTS.AKFIN_LENGTH\", \n  \"GAP_PRODUCTS.AKFIN_METADATA_COLUMN\", \n  \"GAP_PRODUCTS.AKFIN_SIZECOMP\", \n  \"GAP_PRODUCTS.AKFIN_SPECIMEN\", \n  \"GAP_PRODUCTS.AKFIN_STRATUM_GROUPS\", \n  \"GAP_PRODUCTS.AKFIN_SURVEY_DESIGN\", \n  \"GAP_PRODUCTS.AKFIN_TAXONOMY\"\n)\n\nfor (i in 1:length(locations)) {\n  print(locations[i])\n  a <- RODBC::sqlQuery(channel, paste0(\"SELECT * FROM \", locations[i]))\n  write.csv(x = a, file = here::here(\"data\", paste0(locations[i], \".csv\")))\n}\n```\n:::\n\n\n\n### Ex. 1: GOA Pacific Ocean perch biomass and abundance\n\nBiomass and abundance for Pacific Ocean perch from 1990 â€“ 2023 for the western/central/eastern GOA management areas as well as for the entire region. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"WITH FILTERED_STRATA AS (\nSELECT AREA_ID, DESCRIPTION FROM GAP_PRODUCTS.AKFIN_AREA\nWHERE TYPE in ('REGULATORY_AREA', 'REGION') \nAND SURVEY_DEFINITION_ID = 47)\nSELECT \nBIOMASS_MT,\nPOPULATION_COUNT, \nYEAR, \nDESCRIPTION\nFROM GAP_PRODUCTS.AKFIN_BIOMASS BIOMASS\nJOIN FILTERED_STRATA STRATA \nON STRATA.AREA_ID = BIOMASS.AREA_ID\nWHERE BIOMASS.SURVEY_DEFINITION_ID IN 47 \nAND BIOMASS.SPECIES_CODE = 30060\")\n```\n:::\n\n::: {.cell tbl-cap='Ex. 1: GOA Pacific Ocean perch biomass and abundance. '}\n\n```{.r .cell-code}\ndat0 <- dat %>% \n  janitor::clean_names() %>% \n  dplyr::select(biomass_mt, population_count, year, area = description) %>%\n  pivot_longer(cols = c(\"biomass_mt\", \"population_count\"), \n               names_to = \"var\", \n               values_to = \"val\") %>% \n  dplyr::mutate(\n    val = ifelse(var == \"biomass_mt\", val/1e6, val/1e9), \n    var = ifelse(var == \"biomass_mt\", \"Biomass (Mmt)\", \"Population (B)\"), \n    area = gsub(x = area, pattern = \" - \", replacement = \"\\n\"), \n    area = gsub(x = area, pattern = \": \", replacement = \"\\n\"), \n    type = sapply(X = strsplit(x = area, split = \"\\n\", fixed = TRUE), `[[`, 2))  %>% \n  dplyr::arrange(type) %>% \n  dplyr::mutate(\n    area = factor(area, levels = unique(area), labels = unique(area), ordered = TRUE))\n\nflextable::flextable(head(dat)) %>% \n  theme_zebra() %>%\n  flextable::colformat_num(x = ., j = \"YEAR\", big.mark = \"\")\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{BIOMASS\\_MT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{DESCRIPTION}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{BIOMASS\\_MT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{DESCRIPTION}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{483,622.6}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{833,902,161}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1993}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{483,622.6}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{833,902,161}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1993}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{771,412.8}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,252,616,603}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1996}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{771,412.8}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,252,616,603}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1996}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{727,063.5}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,212,034,913}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1999}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{727,063.5}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,212,034,913}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1999}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{GOA\\ Region:\\ All\\ Strata}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"scales\")\nlibrary(scales)\nfigure <- ggplot2::ggplot(\n  dat = dat0, \n  mapping = aes(x = year, y = val, color = type)) +\n  ggplot2::geom_point(size = 3) + \n  ggplot2::facet_grid(cols = vars(area), rows = vars(var), scales = \"free_y\") + \n  ggplot2::scale_x_continuous(name = \"Year\", n.breaks = 3) +\n  ggplot2::scale_y_continuous(name = \"Estimate\", labels = comma) +\n  ggplot2::labs(title = 'GOA Pacific Ocean perch biomass and abundance 1990 â€“ 2023')  + \n  ggplot2::guides(color=guide_legend(title = \"Region Type\"))+\n  ggplot2::scale_color_grey() +\n  ggplot2::theme_bw() +\n  ggplot2::theme(legend.direction = \"horizontal\", \n                 legend.position = \"bottom\")\n\nfigure\n```\n\n::: {.cell-output-display}\n![Ex. 1: GOA Pacific Ocean perch biomass and abundance. ](akfin-oracle-sql-r_files/figure-pdf/test-1-plot-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Ex. 2: AI Rock sole size compositions and ridge plot\n\nNorthern and Southern rock sole size composition data from 1991 â€“ 2022 for the Aleutian Islands, with Ridge plot from [`ggridges`](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"WITH FILTERED_STRATA AS (\nSELECT \nAREA_ID, \nDESCRIPTION \nFROM GAP_PRODUCTS.AKFIN_AREA\nWHERE TYPE = 'REGION' \nAND SURVEY_DEFINITION_ID = 52)\nSELECT \nLENGTH_MM, \nYEAR\nFROM GAP_PRODUCTS.AKFIN_SIZECOMP SIZECOMP\nJOIN FILTERED_STRATA STRATA \nON STRATA.AREA_ID = SIZECOMP.AREA_ID\nWHERE SIZECOMP.SURVEY_DEFINITION_ID IN 52 \nAND SIZECOMP.SPECIES_CODE IN (10261, 10262)\")\n```\n:::\n\n::: {.cell tbl-cap='Ex. 2: AI Rock sole size compositions and ridge plot. '}\n\n```{.r .cell-code}\ndat0 <- dat %>% \n  janitor::clean_names() %>% \n  dplyr::mutate(length_cm = length_mm/10)\nflextable::flextable(head(dat)) %>% \n  theme_zebra() %>%\n    flextable::colformat_num(x = ., j = \"YEAR\", big.mark = \"\")\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LENGTH\\_MM}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LENGTH\\_MM}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{160}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{170}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{180}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{190}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{200}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{210}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2000}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"ggridges\")\nlibrary(ggridges)\nfigure <- \n  ggplot2::ggplot(\n    data = dat0, \n    mapping = aes(x = length_cm, y = as.factor(year), fill = stat(x))) +\n  ggridges::theme_ridges(center_axis_labels = TRUE) + \n  ggridges::geom_density_ridges_gradient(scale = 4, show.legend = FALSE) + \n  ggplot2::scale_y_discrete(name = \"Year\", expand = c(0.01, 0)) +\n  ggplot2::scale_x_continuous(name = \"Length (cm)\", expand = c(0.01, 0)) +\n  # ggplot2::scale_fill_grey() +\n  ggplot2::labs(title = 'AI Rock sole Size Compositions 1991 â€“ 2022') \n\nfigure\n```\n\n::: {.cell-output-display}\n![Ex. 2: AI Rock sole size compositions and ridge plot. ](akfin-oracle-sql-r_files/figure-pdf/test-2-plot-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Ex. 3: EBS Walleye Pollock Age Compositions and Age Pyramid\n\nWalleye pollock age composition for the EBS Standard Area from 1982 â€“ 2022 and the EBS + NW Area from 1987 â€“ 2022, with age pyramid plot. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"WITH FILTERED_STRATA AS (\nSELECT \nAREA_ID, \nDESCRIPTION \nFROM GAP_PRODUCTS.AKFIN_AREA\nWHERE TYPE = 'REGION' AND \nSURVEY_DEFINITION_ID = 98)\nSELECT \nAGECOMP.AGE, \nAGECOMP.POPULATION_COUNT, \nAGECOMP.SEX\nFROM GAP_PRODUCTS.AKFIN_AGECOMP AGECOMP\nJOIN FILTERED_STRATA STRATA \nON STRATA.AREA_ID = AGECOMP.AREA_ID\nWHERE SURVEY_DEFINITION_ID = 98 \nAND SPECIES_CODE = 21740\nAND AGE >= 0\")\n```\n:::\n\n::: {.cell tbl-cap='Ex. 3: EBS Walleye Pollock Age Compositions and Age Pyramid. '}\n\n```{.r .cell-code}\ndat0 <- dat %>% \n  janitor::clean_names() %>% \n  dplyr::filter(sex %in% c(1,2)) %>%\n  dplyr::mutate(\n    sex = ifelse(sex == 1, \"M\", \"F\"),\n    population_count = # change male population to negative\n      ifelse(sex==\"M\", population_count*(-1), population_count*1)/1e9) \n\nflextable::flextable(head(dat)) %>% theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{AGE}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{SEX}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{AGE}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{SEX}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{6}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{446,303,564}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{7}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{312,858,766}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{8}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{217,910,317}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{9}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{145,857,926}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{10}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{65,496,187}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{11}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{48,249,148}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfigure <- ggplot2::ggplot(\n  data = dat0, \n  mapping = \n                 aes(x = age,\n                     y = population_count, \n                     fill = sex)) +\n  ggplot2::scale_fill_grey() +\n  ggplot2::geom_bar(stat = \"identity\") +\n  ggplot2::coord_flip() +\n  ggplot2::scale_x_continuous(name = \"Age\") +\n  ggplot2::scale_y_continuous(name = \"Population (billions)\", labels = abs) +\n  ggplot2::ggtitle(label = \"EBS Walleye Pollock Age Compositions 1982 â€“ 2022\")  + \n  ggplot2::guides(fill = guide_legend(title = \"Sex\"))+\n  ggplot2::theme_bw()\n\nfigure\n```\n\n::: {.cell-output-display}\n![Ex. 3: EBS Walleye Pollock Age Compositions and Age Pyramid. ](akfin-oracle-sql-r_files/figure-pdf/test-3-plot-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Ex. 4: NBS Pacific cod biomass and abundance\n\nPacific cod biomass and abundance data for the NBS by stratum. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"WITH FILTERED_STRATA AS (\nSELECT \nAREA_ID, \nAREA_NAME, \nDESCRIPTION \nFROM GAP_PRODUCTS.AKFIN_AREA\nWHERE TYPE in ('STRATUM') AND \nSURVEY_DEFINITION_ID = 143) \nSELECT \nBIOMASS.BIOMASS_MT, \nBIOMASS.POPULATION_COUNT, \nBIOMASS.YEAR, \nSTRATA.AREA_NAME\nFROM GAP_PRODUCTS.AKFIN_BIOMASS BIOMASS \nJOIN FILTERED_STRATA STRATA \nON STRATA.AREA_ID = BIOMASS.AREA_ID\nWHERE BIOMASS.SURVEY_DEFINITION_ID IN 143 \nAND BIOMASS.SPECIES_CODE = 21720\")\n```\n:::\n\n::: {.cell tbl-cap='Ex. 4: NBS Pacific cod biomass and abundance. '}\n\n```{.r .cell-code}\ndat0 <- dat %>% \n  janitor::clean_names() %>% \n  dplyr::select(biomass_mt, population_count, year, area = area_name) %>%\n  pivot_longer(cols = c(\"biomass_mt\", \"population_count\"), \n               names_to = \"var\", \n               values_to = \"val\") %>% \n  dplyr::mutate(\n    val = ifelse(var == \"biomass_mt\", val/1e6, val/1e9), \n    var = ifelse(var == \"biomass_mt\", \"Biomass (Mmt)\", \"Population (B)\"), \n    area = factor(area, levels = unique(area), labels = unique(area), ordered = TRUE))\nflextable::flextable(head(dat)) %>% \n  theme_zebra() %>%\n  flextable::colformat_num(x = ., j = \"YEAR\", big.mark = \"\")\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{BIOMASS\\_MT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{AREA\\_NAME}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{BIOMASS\\_MT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{POPULATION\\_COUNT}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{YEAR}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{AREA\\_NAME}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{194,846.7}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{73,495,085}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2019}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{194,846.7}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{73,495,085}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2019}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{132,490.2}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{66,187,245}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2017}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{132,490.2}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{66,187,245}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2017}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{132,490.2}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{66,187,245}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2017}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{132,490.2}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{66,187,245}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2017}}} & \\multicolumn{1}{>{\\raggedright}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{Inner\\ Domain}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfigure <- ggplot2::ggplot(\n  dat = dat0, \n  mapping = aes(y = val, x = year, fill = area))  + \n  ggplot2::geom_bar(position=\"stack\", stat=\"identity\") +  \n  ggplot2::facet_grid(rows = vars(var), scales = \"free_y\") +\n  ggplot2::scale_y_continuous(name = \"Estimate\", labels = comma) +\n  ggplot2::scale_x_continuous(name = \"Year\", breaks = unique(dat0$year)) +\n  ggplot2::labs(title = 'NBS Pacific cod biomass and abundance by stratum')  + \n  ggplot2::guides(fill=guide_legend(title = \"Region Type\"))+\n  ggplot2::scale_fill_grey() +\n  ggplot2::theme_bw() +\n  ggplot2::theme(legend.direction = \"horizontal\", \n                 legend.position = \"bottom\")\n\nfigure\n```\n\n::: {.cell-output-display}\n![Ex. 4: NBS Pacific cod biomass and abundance. ](akfin-oracle-sql-r_files/figure-pdf/test-4-fig-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Ex. 5: GOA Pacific Ocean perch biomass and line plot\n\nPacific Ocean perch biomass totals for GOA between 1984-2021 from `GAP_PRODUCTS.AKFIN_BIOMASS`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"SELECT \nSURVEY_DEFINITION_ID, \nBIOMASS_MT, \nBIOMASS_VAR, \nYEAR\nFROM GAP_PRODUCTS.AKFIN_BIOMASS\nWHERE SPECIES_CODE = 30060 \nAND SURVEY_DEFINITION_ID = 47 \nAND AREA_ID = 99903 \nAND YEAR BETWEEN 1984 AND 2023;\") %>% \n  janitor::clean_names() %>% \n  dplyr::mutate(biomass_kmt = biomass_mt/1000, \n                # **approximate** 95% confidence interval\n                biomass_kci_up = (biomass_mt + (2*sqrt(biomass_var)))/1000, \n                biomass_kci_dw = (biomass_mt - (2*sqrt(biomass_var)))/1000) \n```\n:::\n\n::: {.cell tbl-cap='Ex. 5: GOA Pacific Ocean perch biomass and line plot. '}\n\n```{.r .cell-code}\nflextable::flextable(head(dat)) %>%\n  theme_zebra() %>%\n  flextable::colformat_num(x = ., j = \"year\", big.mark = \"\")\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{survey\\_definition\\_id}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_mt}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_var}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{year}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kmt}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kci\\_up}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kci\\_dw}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{survey\\_definition\\_id}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_mt}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_var}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{year}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kmt}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kci\\_up}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{biomass\\_kci\\_dw}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{483,622.6}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{11,803,384,787}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1993}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{483.6226}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{700.9093}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{266.33581}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{771,412.8}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{41,434,152,202}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1996}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{771.4128}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,178.5204}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{364.30515}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{727,063.5}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{150,983,542,178}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1999}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{727.0635}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,504.1955}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-50.06854}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{673,155.1}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{49,285,342,922}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2001}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{673.1551}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,117.1611}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{229.14901}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{457,421.6}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{5,186,126,529}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2003}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{457.4216}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{601.4511}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{313.39204}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{47}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{764,901.4}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{21,499,807,010}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{2005}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{764.9014}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{1,058.1577}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{471.64517}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\na_mean <- dat %>% \n  dplyr::group_by(survey_definition_id) %>% \n  dplyr::summarise(biomass_kmt = mean(biomass_kmt, na.rm = TRUE), \n                   minyr = min(year, na.rm = TRUE), \n                   maxyr = max(year, na.rm = TRUE)) \n\nfigure <-\n  ggplot(data = dat, \n         mapping = aes(x = year, \n                       y = biomass_kmt)) +\n  ggplot2::geom_point(size = 2.5, color = \"grey40\") + \n  ggplot2::scale_x_continuous(\n    name = \"Year\", \n    labels = scales::label_number(\n      accuracy = 1, \n      big.mark = \"\"))   +\n  ggplot2::scale_y_continuous(\n    name = \"Biomass (Kmt)\", \n    labels = comma) +\n  ggplot2::geom_segment(\n    data = a_mean,\n    mapping = aes(x = minyr, \n                  xend = maxyr, \n                  y = biomass_kmt, \n                  yend = biomass_kmt),\n    linetype = \"dashed\", \n    linewidth = 2) +\n  ggplot2::geom_errorbar(\n    mapping = aes(ymin = biomass_kci_dw, ymax = biomass_kci_up),\n                 position = position_dodge(.9),\n    alpha = 0.5, width=.2) +\n  ggplot2::ggtitle(\n    label = \"GOA Pacific Ocean Perch Biomass 1984-2021\", \n    subtitle = paste0(\"Mean = \", \n                      formatC(x = a_mean$biomass_mt, \n                              digits = 2, \n                              big.mark = \",\", \n                              format = \"f\"), \n                      \" Kmt\")) +\n  ggplot2::theme_bw()\n\nfigure\n```\n\n::: {.cell-output-display}\n![Ex. 5: GOA Pacific Ocean perch biomass and line plot. ](akfin-oracle-sql-r_files/figure-pdf/test-5-fig-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Ex. 6: EBS Pacific Ocean perch CPUE and [`akgfmaps`](https://github.com/afsc-gap-products/akgfmaps) map \n\nPacific Ocean perch catch-per-unit-effort estimates for EBS in 2021 from `GAP_PRODUCTS.AKFIN_CPUE` and map constructed using [`akgfmaps`](https://github.com/afsc-gap-products/akgfmaps). Here, we'll use AKFIN HAUL and CRUISES data also included in this repo, for convenience, though they are very similar to their `RACEBASE` analogs. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- RODBC::sqlQuery(channel = channel, \n                       query = \n\"SELECT \n(cp.CPUE_KGKM2/100) CPUE_KGHA, -- akgfmaps is expecting hectares\nhh.LATITUDE_DD_START LATITUDE,\nhh.LONGITUDE_DD_START LONGITUDE\n\nFROM GAP_PRODUCTS.AKFIN_CPUE cp\n\n-- Use HAUL data to obtain LATITUDE & LONGITUDE and connect to cruisejoin\nLEFT JOIN GAP_PRODUCTS.AKFIN_HAUL hh\nON cp.HAULJOIN = hh.HAULJOIN\n\n-- Use CRUISES data to obtain YEAR and SURVEY_DEFINITION_ID\nLEFT JOIN GAP_PRODUCTS.AKFIN_CRUISE cc\nON hh.CRUISEJOIN = cc.CRUISEJOIN\n\nWHERE cp.SPECIES_CODE = 30060 \nAND cc.SURVEY_DEFINITION_ID = 98 \nAND cc.YEAR = 2021;\")\n```\n:::\n\n::: {.cell tbl-cap='Ex. 6: EBS Pacific Ocean perch CPUE and [`akgfmaps`](https://github.com/afsc-gap-products/akgfmaps) map. '}\n\n```{.r .cell-code}\nflextable::flextable(head(dat)) %>% theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=latex}\n\\global\\setlength{\\Oldarrayrulewidth}{\\arrayrulewidth}\n\n\\global\\setlength{\\Oldtabcolsep}{\\tabcolsep}\n\n\\setlength{\\tabcolsep}{0pt}\n\n\\renewcommand*{\\arraystretch}{1.5}\n\n\n\n\\providecommand{\\ascline}[3]{\\noalign{\\global\\arrayrulewidth #1}\\arrayrulecolor[HTML]{#2}\\cline{#3}}\n\n\\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}}\n\n\n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{CPUE\\_KGHA}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LATITUDE}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LONGITUDE}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endfirsthead \n\n\\hhline{>{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}->{\\arrayrulecolor[HTML]{000000}\\global\\arrayrulewidth=0pt}-}\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{CPUE\\_KGHA}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LATITUDE}}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{CFCFCF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{\\textbf{LONGITUDE}}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\\endhead\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{60.65295}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-176.2033}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{59.34938}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-175.0900}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{61.68338}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-173.6652}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{59.97450}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-175.9149}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{61.32219}}} & \\multicolumn{1}{>{\\cellcolor[HTML]{EFEFEF}\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-176.3127}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{0}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{61.64331}}} & \\multicolumn{1}{>{\\raggedleft}m{\\dimexpr 0.75in+0\\tabcolsep}}{\\textcolor[HTML]{000000}{\\fontsize{11}{11}\\selectfont{-175.0828}}} \\\\\n\n\\noalign{\\global\\arrayrulewidth 0pt}\\arrayrulecolor[HTML]{000000}\n\n\n\n\n\n\\end{longtable}\n\n\n\n\\arrayrulecolor[HTML]{000000}\n\n\\global\\setlength{\\arrayrulewidth}{\\Oldarrayrulewidth}\n\n\\global\\setlength{\\tabcolsep}{\\Oldtabcolsep}\n\n\\renewcommand*{\\arraystretch}{1}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# devtools::install_github(\"afsc-gap-products/akgfmaps\", build_vignettes = TRUE)\nlibrary(akgfmaps)\n\nfigure <- akgfmaps::make_idw_map(\n  x = dat, # Pass data as a data frame\n  region = \"bs.south\", # Predefined EBS area\n  set.breaks = \"jenks\", # Gets Jenks breaks from classint::classIntervals()\n  in.crs = \"+proj=longlat\", # Set input coordinate reference system\n  out.crs = \"EPSG:3338\", # Set output coordinate reference system\n  grid.cell = c(20000, 20000), # 20x20km grid\n  key.title = \"Pacific Ocean perch\") # Include in the legend title\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[inverse distance weighted interpolation]\n[inverse distance weighted interpolation]\n```\n:::\n\n```{.r .cell-code}\nfigure$plot + \n  ggplot2::guides(fill=guide_legend(title = \"Pacific Ocean perch\\nCPUE (kg/km2)\"))  |>   \n  change_fill_color(new.scheme = \"grey\", show.plot = FALSE)\n```\n\n::: {.cell-output-display}\n![Ex. 6: EBS Pacific Ocean perch CPUE and [`akgfmaps`](https://github.com/afsc-gap-products/akgfmaps) map. ](akfin-oracle-sql-r_files/figure-pdf/test-6-fig-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "akfin-oracle-sql-r_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{\"knit_meta_id\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-1-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-2-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-3-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-4-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-5-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\",\"test-6-tbl\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"booktabs\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"pdflscape\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"tabu\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttablex\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"ulem\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"normalem\"]},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"makecell\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"xcolor\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"fontspec\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multicol\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hhline\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\newlength\\\\Oldarrayrulewidth\",\"\\\\newlength\\\\Oldtabcolsep\"]}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"hyperref\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]}]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}