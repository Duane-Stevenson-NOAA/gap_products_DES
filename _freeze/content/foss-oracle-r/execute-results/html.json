{
  "hash": "0509e4e3351c8e1f9d60b6a344aaae3f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Access via Oracle and R (AFSC only)\nnumber-sections: true\n---\n\n\n\n\nIf the user has access to the AFSC `Oracle` database, the user can use `SQL developer` to view and pull the FOSS public data directly from the `GAP_PRODUCTS` `Oracle` schema. \n\n### Connect to Oracle from R\n\nMany users will want to access the data from `Oracle` using `R`. The user will need to install the `RODBC` `R` package and ask OFIS (IT) connect `R` to `Oracle`. Then, use the following code in `R` to establish a connection from `R` to `Oracle`: \n\nHere, the user can write in their username and password directly into the `RODBC` connect function. Never save usernames or passwords in scripts that may be intentionally or unintentionally shared with others. If no username and password is entered in the function, pop-ups will appear on the screen asking for the username and password. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gapindex)\nchannel <- gapindex::get_connected()\n```\n:::\n\n\n\n### Ex. Wholesale download data and join data in R\n\n\n::: {.cell tbl-cap='Wholesale download data and join data in R. '}\n\n```{.r .cell-code}\nlocations <- c(\n  \"GAP_PRODUCTS.FOSS_CATCH\",\n  \"GAP_PRODUCTS.FOSS_HAUL\",\n  \"GAP_PRODUCTS.FOSS_SPECIES\"\n)\n\nprint(Sys.Date())\n\nerror_loading <- c() # log if any tables are unable to download \nfor (i in 1:length(locations)){\n  print(locations[i])\n  a <- RODBC::sqlQuery(channel, paste0(\"SELECT * FROM \", locations[i], \"; \"))\n  if (is.null(nrow(a))) { # if an error in downloading has occurred\n    error_loading <- c(error_loading, locations[i])\n  } else { # if no error in downloading has occurred\n    write.csv(x = a, \n              # change file name to be more computer file storage friendly\n              here::here(paste0(tolower(gsub(\n                pattern = '.', \n                replacement = \"_\", \n                x = locations[i], \n                fixed = TRUE)),\n                \".csv\")))\n  }\n}\nerror_loading\n```\n:::\n\n\nJoin downloaded files into presence-only table\n\n\n::: {.cell tbl-cap='Presence-only join data in R. '}\n\n```{.r .cell-code}\n# Load data\nlibrary(dplyr)\nlibrary(here)\nlibrary(readr)\ncatch <- readr::read_csv(file = here::here(\"data/gap_products_foss_catch.csv\"))[,-1] # remove \"row number\" column\nhaul <- readr::read_csv(file = here::here(\"data/gap_products_foss_haul.csv\"))[,-1] # remove \"row number\" column\nspecies <- readr::read_csv(file = here::here(\"data/gap_products_foss_species.csv\"))[,-1] # remove \"row number\" column\n\ndat <- \n  # join haul and catch data to unique species by survey table\n  dplyr::left_join(haul, catch) %>% \n  # join species data to unique species by survey table\n  dplyr::left_join(species) %>% \n  # modify zero-filled rows\n  dplyr::mutate(\n    CPUE_KGKM2 = ifelse(is.null(CPUE_KGKM2), 0, CPUE_KGKM2), # just in case\n    CPUE_KGHA = CPUE_KGKM2/100, # Hectares\n    CPUE_NOKM2 = ifelse(is.null(CPUE_NOKM2), 0, CPUE_NOKM2), # just in case\n    CPUE_NOHA = CPUE_NOKM2/100, # Hectares\n    COUNT = ifelse(is.null(COUNT), 0, COUNT),\n    WEIGHT_KG = ifelse(is.null(WEIGHT_KG), 0, WEIGHT_KG) )\n```\n:::\n\n\n\nJoin downloaded files into zero-filled table\n\n\n::: {.cell tbl-cap='Zero-fill join data in R. '}\n\n```{.r .cell-code}\n# Load data\nlibrary(dplyr)\nlibrary(here)\nlibrary(readr)\ncatch <- readr::read_csv(file = here::here(\"data/gap_products_foss_catch.csv\"))[,-1] # remove \"row number\" column\nhaul <- readr::read_csv(file = here::here(\"data/gap_products_foss_haul.csv\"))[,-1] # remove \"row number\" column\nspecies <- readr::read_csv(file = here::here(\"data/gap_products_foss_species.csv\"))[,-1] # remove \"row number\" column\n\n# come up with full combination of what species should be listed for what hauls/surveys\n# for zero-filled data, all species caught in a survey need to have zero or non-zero row entries for a haul\ncomb <- dplyr::full_join(\n  x = dplyr::left_join(catch, haul, by = \"HAULJOIN\") %>%\n    dplyr::select(SURVEY_DEFINITION_ID, SPECIES_CODE) %>%\n    dplyr::distinct(),\n  y = haul %>%\n    dplyr::select(SURVEY_DEFINITION_ID, HAULJOIN) %>%\n    dplyr::distinct(), \n  by = \"SURVEY_DEFINITION_ID\", \n  relationship = \"many-to-many\"\n)\n\n# Join data to make a full zero-filled CPUE dataset\ndat <- comb %>% \n  # add species data to unique species by survey table\n  dplyr::left_join(species, \"SPECIES_CODE\") %>% \n  # add catch data\n  dplyr::full_join(catch, c(\"SPECIES_CODE\", \"HAULJOIN\")) %>% \n  # add haul data\n  dplyr::full_join(haul) %>% # , c(\"SURVEY_DEFINITION_ID\", \"HAULJOIN\")\n  # modify zero-filled rows\n  dplyr::mutate(\n    CPUE_KGKM2 = ifelse(is.null(CPUE_KGKM2), 0, CPUE_KGKM2),\n    CPUE_KGHA = CPUE_KGKM2/100, # Hectares\n    CPUE_NOKM2 = ifelse(is.null(CPUE_NOKM2), 0, CPUE_NOKM2),\n    CPUE_NOHA = CPUE_NOKM2/100, # Hectares\n    COUNT = ifelse(is.null(COUNT), 0, COUNT),\n    WEIGHT_KG = ifelse(is.null(WEIGHT_KG), 0, WEIGHT_KG) ) \n```\n:::\n\n\n### Ex. Join data using Oracle\n\nTo join these tables in Oracle, you may use a variant of the following code: \n\n\n::: {.cell}\n\n```{.sql .cell-code}\n\nSELECT \nhh.YEAR,\nhh.SRVY,                 \nhh.SURVEY,\nhh.SURVEY_DEFINITION_ID,\nhh.SURVEY_NAME,\nhh.CRUISE,\nhh.CRUISEJOIN,           \nhh.HAUL,\nhh.HAULJOIN,\nhh.STRATUM,\nhh.STATION,\nhh.VESSEL_ID,\nhh.VESSEL_NAME,          \nhh.DATE_TIME,\nhh.LATITUDE_DD_START, \nhh.LONGITUDE_DD_START, \nhh.LATITUDE_DD_END,\nhh.LONGITUDE_DD_END, \nhh.BOTTOM_TEMPERATURE_C,\nhh.SURFACE_TEMPERATURE_C,\nhh.DEPTH_M,\ncc.SPECIES_CODE,\nss.ITIS,\nss.WORMS,\nss.COMMON_NAME,     \nss.SCIENTIFIC_NAME,\nss.ID_RANK,\nCASE WHEN cc.CPUE_KGKM2 IS NULL THEN 0 ELSE cc.CPUE_KGKM2 END AS CPUE_KGKM2,\nCASE WHEN cc.CPUE_NOKM2 IS NULL THEN 0 ELSE cc.CPUE_NOKM2 END AS CPUE_NOKM2,\nCASE WHEN cc.COUNT IS NULL THEN 0 ELSE cc.COUNT END AS COUNT,\nCASE WHEN cc.WEIGHT_KG IS NULL THEN 0 ELSE cc.WEIGHT_KG END AS WEIGHT_KG,\nCASE WHEN cc.TAXON_CONFIDENCE IS NULL THEN NULL ELSE cc.TAXON_CONFIDENCE END AS TAXON_CONFIDENCE,\nhh.AREA_SWEPT_KM2,       \nhh.DISTANCE_FISHED_KM,\nhh.DURATION_HR,          \nhh.NET_WIDTH_M,\nhh.NET_HEIGHT_M,\nhh.PERFORMANCE \nFROM GAP_PRODUCTS.FOSS_SURVEY_SPECIES sv\nFULL OUTER JOIN GAP_PRODUCTS.FOSS_SPECIES ss\nON sv.SPECIES_CODE = ss.SPECIES_CODE\nFULL OUTER JOIN GAP_PRODUCTS.FOSS_HAUL hh\nON sv.SURVEY_DEFINITION_ID = hh.SURVEY_DEFINITION_ID\nFULL OUTER JOIN GAP_PRODUCTS.FOSS_CATCH cc\nON sv.SPECIES_CODE = cc.SPECIES_CODE\nAND hh.HAULJOIN = cc.HAULJOIN\n```\n:::\n\n\n### Ex. Subset data\n\nHere, we are pulling EBS Pacific cod from 2010 - 2021: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pull data\ndata <- RODBC::sqlQuery(\nchannel = channel, \nquery = \n\"SELECT * FROM GAP_PRODUCTS.FOSS_CATCH cc\nJOIN GAP_PRODUCTS.FOSS_HAUL hh\nON cc.HAULJOIN = hh.HAULJOIN\nWHERE SRVY = 'EBS' \nAND SPECIES_CODE = 21720 -- 'Pacific cod' \nAND YEAR >= 2010 \nAND YEAR < 2021\")\n\nflextable::flextable(data[1:3,]) %>% \n  flextable::theme_zebra() \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-4b864428{}.cl-4b72c114{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4b72c132{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4b79e07a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4b79e08e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4b7a1cde{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b7a1cf2{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b7a1cfc{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b7a1d10{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b7a1d11{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b7a1d1a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-4b864428'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">HAULJOIN</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">SPECIES_CODE</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">CPUE_KGKM2</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">CPUE_NOKM2</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">COUNT</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">WEIGHT_KG</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">TAXON_CONFIDENCE</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">YEAR</span></p></th><th class=\"cl-4b7a1cf2\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c114\">SRVY</span></p></th><th class=\"cl-4b7a1cf2\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c114\">SURVEY</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">SURVEY_DEFINITION_ID</span></p></th><th class=\"cl-4b7a1cf2\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c114\">SURVEY_NAME</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">CRUISE</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">CRUISEJOIN</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">HAULJOIN.1</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">HAUL</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">STRATUM</span></p></th><th class=\"cl-4b7a1cf2\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c114\">STATION</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">VESSEL_ID</span></p></th><th class=\"cl-4b7a1cf2\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c114\">VESSEL_NAME</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">DATE_TIME</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">LATITUDE_DD_START</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">LONGITUDE_DD_START</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">LATITUDE_DD_END</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">LONGITUDE_DD_END</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">BOTTOM_TEMPERATURE_C</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">SURFACE_TEMPERATURE_C</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">DEPTH_M</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">DISTANCE_FISHED_KM</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">DURATION_HR</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">NET_WIDTH_M</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">NET_HEIGHT_M</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">AREA_SWEPT_KM2</span></p></th><th class=\"cl-4b7a1cde\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c114\">PERFORMANCE</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-19,288</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">21,720</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">449.8301</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">1,876.1759</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">83</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">19.90</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">1</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2,019</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">EBS</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">eastern Bering Sea</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">98</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">Eastern Bering Sea Crab/Groundfish Bottom Trawl Survey</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">201,901</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-727</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-19,288</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">96</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">20</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">O-18</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">162</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">ALASKA KNIGHT</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2019-06-29 06:54:00</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">59.68079</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-168.6144</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">59.65546</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-168.6178</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">5.1</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">7.8</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">39</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.821</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.505</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">15.682</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.227</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.044239</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-19,252</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">21,720</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">413.4828</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">248.0897</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">12</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">20.00</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">1</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2,019</span></p></td><td class=\"cl-4b7a1d1a\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">EBS</span></p></td><td class=\"cl-4b7a1d1a\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">eastern Bering Sea</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">98</span></p></td><td class=\"cl-4b7a1d1a\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">Eastern Bering Sea Crab/Groundfish Bottom Trawl Survey</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">201,901</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-727</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-19,252</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">76</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">31</span></p></td><td class=\"cl-4b7a1d1a\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">G-03</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">162</span></p></td><td class=\"cl-4b7a1d1a\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">ALASKA KNIGHT</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2019-06-24 15:52:02</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">57.01591</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-166.4752</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">56.99137</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-166.4601</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">4.1</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">9.7</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">74</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.880</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.528</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">16.795</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.126</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.048370</span></p></td><td class=\"cl-4b7a1d11\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-18,731</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">21,720</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">946.3481</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2,592.1327</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">118</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">43.08</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">1</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2,019</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">EBS</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">eastern Bering Sea</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">98</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">Eastern Bering Sea Crab/Groundfish Bottom Trawl Survey</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">201,901</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-726</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-18,731</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">11</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">31</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">I-13</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">94</span></p></td><td class=\"cl-4b7a1d10\"><p class=\"cl-4b79e08e\"><span class=\"cl-4b72c132\">VESTERAALEN</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2019-06-04 13:15:57</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">57.69052</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-160.2580</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">57.66518</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">-160.2640</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">5.5</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">7.5</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">54</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.840</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.520</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">16.029</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">2.200</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0.045522</span></p></td><td class=\"cl-4b7a1cfc\"><p class=\"cl-4b79e07a\"><span class=\"cl-4b72c132\">0</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n\n### Ex. Find all species found in the eastern Bering Sea (EBS) survey in 2023\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pull data\ndata <- RODBC::sqlQuery(\nchannel = channel, \nquery = \n\"SELECT DISTINCT \nss.COMMON_NAME,\nss.SCIENTIFIC_NAME, \nss.ID_RANK, \nss.WORMS\nFROM GAP_PRODUCTS.FOSS_CATCH cc -- get species codes\nLEFT JOIN GAP_PRODUCTS.FOSS_SPECIES ss -- get species info\nON cc.SPECIES_CODE = ss.SPECIES_CODE\nLEFT JOIN GAP_PRODUCTS.FOSS_HAUL hh -- filter by year and survey\nON cc.HAULJOIN = hh.HAULJOIN\nWHERE hh.YEAR = 2023\nAND hh.SURVEY_DEFINITION_ID = 98 -- EBS survey\nORDER BY COMMON_NAME\")\n\nflextable::flextable(data[1:3,]) %>% \n  # flextable::fit_to_width(max_width = 6) %>% \n  flextable::theme_zebra() \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-4bc95e5c{}.cl-4bb750d6{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4bb750ea{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4bbe2a96{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4bbe2aaa{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4bbe66be{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4bbe66d2{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4bbe66d3{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4bbe66dc{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4bbe66e6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4bbe66f0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-4bc95e5c'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-4bbe66be\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750d6\">COMMON_NAME</span></p></th><th class=\"cl-4bbe66be\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750d6\">SCIENTIFIC_NAME</span></p></th><th class=\"cl-4bbe66be\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750d6\">ID_RANK</span></p></th><th class=\"cl-4bbe66d2\"><p class=\"cl-4bbe2aaa\"><span class=\"cl-4bb750d6\">WORMS</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Alaska great-tellin</span></p></td><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Megangulus luteus</span></p></td><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">species</span></p></td><td class=\"cl-4bbe66dc\"><p class=\"cl-4bbe2aaa\"><span class=\"cl-4bb750ea\">423,511</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4bbe66e6\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Alaska plaice</span></p></td><td class=\"cl-4bbe66e6\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Pleuronectes quadrituberculatus</span></p></td><td class=\"cl-4bbe66e6\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">species</span></p></td><td class=\"cl-4bbe66f0\"><p class=\"cl-4bbe2aaa\"><span class=\"cl-4bb750ea\">254,564</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Alaska razor</span></p></td><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">Siliqua alta</span></p></td><td class=\"cl-4bbe66d3\"><p class=\"cl-4bbe2a96\"><span class=\"cl-4bb750ea\">species</span></p></td><td class=\"cl-4bbe66dc\"><p class=\"cl-4bbe2aaa\"><span class=\"cl-4bb750ea\">413,689</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/tabwid-1.1.3/tabwid.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}