{
  "hash": "bfc5db018942202f94b5451733df9698",
  "result": {
    "markdown": "---\ntitle: Access API data using R\n---\n\n\n\n\nAn application programming interface (API) is a way for two or more computer programs to communicate with each other.\n\nMore information about how to amend API links can be found [here](https://docs.oracle.com/en/database/oracle/oracle-rest-data-services/22.3/books.html#AELIG90103/). Useful introductions to using APIs in `R` can be found [here](https://www.dataquest.io/blog/r-api-tutorial/). \n\n## Ex. 1: Load the first 25 rows (default) of data\n\n\n::: {.cell tbl-cap='Ex. 1: Load the first 25 rows (default) of data. '}\n\n```{.r .cell-code}\n # install.packages(c(\"httr\", \"jsonlite\"))\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(dplyr)\n # link to the API\napi_link <- \"https://apps-st.fisheries.noaa.gov/ods/foss/afsc_groundfish_survey/\"\n\nres <- httr::GET(url = api_link)\n # res # Test connection\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\n # names(data)\nflextable::flextable(head(data$items, 3))  %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-4b6f7bd0{}.cl-4b62d344{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4b62d358{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4b67b80a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4b67b814{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4b67d4de{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b67d4e8{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b67d4e9{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b67d4f2{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b67d4f3{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4b67d4f4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-4b6f7bd0'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-4b67d4de\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d344\">year</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">srvy</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">survey</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">survey_id</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cruise</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">haul</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">stratum</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">station</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">vessel_name</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">vessel_id</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">date_time</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">latitude_dd</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">longitude_dd</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">species_code</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">common_name</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">scientific_name</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">taxon_confidence</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_kgha</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_kgkm2</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_kg1000km2</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_noha</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_nokm2</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">cpue_no1000km2</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">weight_kg</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">count</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">bottom_temperature_c</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">surface_temperature_c</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">depth_m</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">distance_fished_km</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">net_width_m</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">net_height_m</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">area_swept_ha</span></p></th><th class=\"cl-4b67d4e8\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d344\">duration_hr</span></p></th><th class=\"cl-4b67d4de\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d344\">tsn</span></p></th><th class=\"cl-4b67d4de\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d344\">ak_survey_id</span></p></th><th class=\"cl-4b67d4de\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d344\">links</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">2,002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">AI</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Aleutian Islands Bottom Trawl Survey</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.00201E+005</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">6.0E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.22E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">307-63</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Vesteraalen</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">9.4E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">05/17/2002 18:56:58</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.3737209999999997E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">-1.6701570000000001E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">9.502E+004</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">feathery bryozoan</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Eucratea loricata</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Low</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.7493999999999999E-002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.7494449999999999E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.7494451079999999E+003</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\"></span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\"></span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\"></span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">4.3999999999999997E-002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">0</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">4.0999999999999996E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2999999999999998E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.87E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.5609999999999999E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.6111999999999998E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.25E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.5150831999999994E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.8000000000000003E-001</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">155,809</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">878,821</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">[[data.frame]]</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b67d4f3\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">2,002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">AI</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Aleutian Islands Bottom Trawl Survey</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2E+001</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.00201E+005</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">6.0E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.22E+002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">307-63</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Vesteraalen</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">9.4E+001</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">05/17/2002 18:56:58</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.3737209999999997E+001</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">-1.6701570000000001E+002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.9E+004</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">squid unid.</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Decapodiformes</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">High</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.2266000000000001E-002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.2265670000000002E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.2265665009999998E+003</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.180809E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.1808092900000003E+002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.1808092869500001E+005</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.6000000000000001E-002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">8.0E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">4.0999999999999996E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2999999999999998E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.87E+002</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.5609999999999999E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.6111999999999998E+001</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.25E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.5150831999999994E+000</span></p></td><td class=\"cl-4b67d4f4\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.8000000000000003E-001</span></p></td><td class=\"cl-4b67d4f3\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\"></span></p></td><td class=\"cl-4b67d4f3\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">878,822</span></p></td><td class=\"cl-4b67d4f3\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">[[data.frame]]</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">2,002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">AI</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Aleutian Islands Bottom Trawl Survey</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.00201E+005</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">6.0E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.22E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">307-63</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Vesteraalen</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">9.4E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">05/17/2002 18:56:58</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.3737209999999997E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">-1.6701570000000001E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.4191E+004</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">shortfin eelpout</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">Lycodes brevipes</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">High</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.5784000000000003E-002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.5784099999999999E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">3.5784104480000001E+003</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.9520199999999996E-001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.9520231999999993E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.9520232174000004E+004</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">8.9999999999999997E-002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.0E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">4.0999999999999996E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">5.2999999999999998E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.87E+002</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.5609999999999999E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">1.6111999999999998E+001</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">7.25E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.5150831999999994E+000</span></p></td><td class=\"cl-4b67d4f2\"><p class=\"cl-4b67b814\"><span class=\"cl-4b62d358\">2.8000000000000003E-001</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">165,258</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">878,823</span></p></td><td class=\"cl-4b67d4e9\"><p class=\"cl-4b67b80a\"><span class=\"cl-4b62d358\">[[data.frame]]</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## Ex. 2: Load the first 10000 rows of data\n\n\n::: {.cell tbl-cap='Ex. 2: Load the first 10000 rows of data. '}\n\n```{.r .cell-code}\n# Not run because too big:\nres <- httr::GET(url = paste0(api_link, \"?offset=0&limit=10000\"))\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\nprint(paste0(\"rows: \", dim(data$items)[1], \"; cols: \", dim(data$items)[2]))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"rows: 10000; cols: 36\"\n```\n:::\n:::\n\n\n## Ex. 3: Filter by Year\n\nShow all the data greater than the year 2020. \n\n\n::: {.cell tbl-cap='Ex. 3: Filter by Year. '}\n\n```{.r .cell-code}\nres <- httr::GET(url = paste0(api_link, '?q={\"year\":{\"$gt\":2020}}'))\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\nflextable::flextable(\n  data$items[1:3, c(\"year\", \"srvy\", \"stratum\", \"species_code\", \"cpue_kgkm2\")]) %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-4fc414fc{}.cl-4fb9a968{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4fb9a972{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4fbda2b6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4fbda2c0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4fbdc0e8{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4fbdc0f2{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4fbdc0f3{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4fbdc0fc{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4fbdc0fd{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4fbdc106{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-4fc414fc'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-4fbdc0e8\"><p class=\"cl-4fbda2b6\"><span class=\"cl-4fb9a968\">year</span></p></th><th class=\"cl-4fbdc0f2\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a968\">srvy</span></p></th><th class=\"cl-4fbdc0f2\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a968\">stratum</span></p></th><th class=\"cl-4fbdc0f2\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a968\">species_code</span></p></th><th class=\"cl-4fbdc0f2\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a968\">cpue_kgkm2</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4fbdc0f3\"><p class=\"cl-4fbda2b6\"><span class=\"cl-4fb9a972\">2,022</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">AI</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">7.22E+002</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">1.0261E+004</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">6.7332582200000002E+002</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4fbdc0fd\"><p class=\"cl-4fbda2b6\"><span class=\"cl-4fb9a972\">2,022</span></p></td><td class=\"cl-4fbdc106\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">AI</span></p></td><td class=\"cl-4fbdc106\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">7.93E+002</span></p></td><td class=\"cl-4fbdc106\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">8.054E+004</span></p></td><td class=\"cl-4fbdc106\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">3.6112E-001</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-4fbdc0f3\"><p class=\"cl-4fbda2b6\"><span class=\"cl-4fb9a972\">2,022</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">AI</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">7.22E+002</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">2.1347E+004</span></p></td><td class=\"cl-4fbdc0fc\"><p class=\"cl-4fbda2c0\"><span class=\"cl-4fb9a972\">7.5809130500000003E+002</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## Ex. 4: Filter by species name\n\nShow all the data where the product name contains pollock Please note that here the word pollock is case sensitive.\n\nThe notation for finding a string is to use % around it. Since % is a reserved character in a URL, you have to replace `%` with `%25`. \n\n\n::: {.cell tbl-cap='Ex. 4: Filter by species name. '}\n\n```{.r .cell-code}\nres <- httr::GET(\n  url = paste0(api_link, '?q={\"common_name\":{\"$like\":\"%25pollock%25\"}}'))\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\nflextable::flextable(\n  data$items[1:3, c(\"year\", \"srvy\", \"stratum\", \"species_code\", \"cpue_kgkm2\")]) %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-501226b0{}.cl-500832f4{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-500832fe{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-500c14d2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-500c14dc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-500c294a{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-500c294b{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-500c2954{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-500c2955{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-500c295e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-500c295f{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-501226b0'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-500c294a\"><p class=\"cl-500c14d2\"><span class=\"cl-500832f4\">year</span></p></th><th class=\"cl-500c294b\"><p class=\"cl-500c14dc\"><span class=\"cl-500832f4\">srvy</span></p></th><th class=\"cl-500c294b\"><p class=\"cl-500c14dc\"><span class=\"cl-500832f4\">stratum</span></p></th><th class=\"cl-500c294b\"><p class=\"cl-500c14dc\"><span class=\"cl-500832f4\">species_code</span></p></th><th class=\"cl-500c294b\"><p class=\"cl-500c14dc\"><span class=\"cl-500832f4\">cpue_kgkm2</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-500c2954\"><p class=\"cl-500c14d2\"><span class=\"cl-500832fe\">2,002</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">AI</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">7.21E+002</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">2.174E+004</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">6.3989099999999999E-001</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-500c295e\"><p class=\"cl-500c14d2\"><span class=\"cl-500832fe\">2,002</span></p></td><td class=\"cl-500c295f\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">AI</span></p></td><td class=\"cl-500c295f\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">7.22E+002</span></p></td><td class=\"cl-500c295f\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">2.174E+004</span></p></td><td class=\"cl-500c295f\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">7.7532226400000002E+002</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-500c2954\"><p class=\"cl-500c14d2\"><span class=\"cl-500832fe\">2,002</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">AI</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">7.22E+002</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">2.174E+004</span></p></td><td class=\"cl-500c2955\"><p class=\"cl-500c14dc\"><span class=\"cl-500832fe\">1.0685806397E+004</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## Ex. 5: Combination of year and name filters\n\nShow all the data where years > 2020 and the product name contains pollock\n\n\n::: {.cell tbl-cap='Ex. 5: Combination of year and name filters. '}\n\n```{.r .cell-code}\nres <- httr::GET(\n  url = paste0(api_link, \n               '?q={\"year\":{\"$gt\":2020},\"common_name\":{\"$like\":\"%25pollock%25\"}}'))\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\nflextable::flextable(\n  data$items[1:3, c(\"year\", \"srvy\", \"stratum\", \"species_code\", \"cpue_kgkm2\")]) %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-50635a80{}.cl-505932e4{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-505932ee{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-505d301a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-505d3024{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-505d469a{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-505d46a4{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-505d46a5{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-505d46a6{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-505d46ae{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-505d46b8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-50635a80'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-505d469a\"><p class=\"cl-505d301a\"><span class=\"cl-505932e4\">year</span></p></th><th class=\"cl-505d46a4\"><p class=\"cl-505d3024\"><span class=\"cl-505932e4\">srvy</span></p></th><th class=\"cl-505d46a4\"><p class=\"cl-505d3024\"><span class=\"cl-505932e4\">stratum</span></p></th><th class=\"cl-505d46a4\"><p class=\"cl-505d3024\"><span class=\"cl-505932e4\">species_code</span></p></th><th class=\"cl-505d46a4\"><p class=\"cl-505d3024\"><span class=\"cl-505932e4\">cpue_kgkm2</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-505d46a5\"><p class=\"cl-505d301a\"><span class=\"cl-505932ee\">2,022</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">AI</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">7.22E+002</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">2.174E+004</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">2.2754334435000001E+004</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-505d46ae\"><p class=\"cl-505d301a\"><span class=\"cl-505932ee\">2,022</span></p></td><td class=\"cl-505d46b8\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">AI</span></p></td><td class=\"cl-505d46b8\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">7.93E+002</span></p></td><td class=\"cl-505d46b8\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">2.174E+004</span></p></td><td class=\"cl-505d46b8\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">7.8536315350000004E+003</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-505d46a5\"><p class=\"cl-505d301a\"><span class=\"cl-505932ee\">2,022</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">AI</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">7.21E+002</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">2.174E+004</span></p></td><td class=\"cl-505d46a6\"><p class=\"cl-505d3024\"><span class=\"cl-505932ee\">7.2350103259999996E+003</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## Ex. 6: Combination of year, srvy, stratum\n\nShow all the data where year = 1989, srvy = \"EBS\", and stratum is not equal to 81\n\n\n::: {.cell tbl-cap='Ex. 6: Combination of year, srvy, stratum. '}\n\n```{.r .cell-code}\nres <- httr::GET(\n  url = paste0(api_link, '?q={\"year\":1989,\"srvy\":\"EBS\",\"stratum\":{\"$ne\":\"81\"}}'))\ndata <- jsonlite::fromJSON(base::rawToChar(res$content))\nflextable::flextable(\n  data$items[1:3, c(\"year\", \"srvy\", \"stratum\", \"species_code\", \"cpue_kgkm2\")]) %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-50cab9fa{}.cl-50c01c3e{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-50c01c48{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-50c3df04{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-50c3df0e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-50c3f426{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-50c3f427{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-50c3f430{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-50c3f431{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-50c3f43a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-50c3f444{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-50cab9fa'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-50c3f426\"><p class=\"cl-50c3df04\"><span class=\"cl-50c01c3e\">year</span></p></th><th class=\"cl-50c3f427\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c3e\">srvy</span></p></th><th class=\"cl-50c3f427\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c3e\">stratum</span></p></th><th class=\"cl-50c3f427\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c3e\">species_code</span></p></th><th class=\"cl-50c3f427\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c3e\">cpue_kgkm2</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-50c3f430\"><p class=\"cl-50c3df04\"><span class=\"cl-50c01c48\">1,989</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">EBS</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">1.0E+001</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">4.05E+004</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">9.6200360000000007E+000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-50c3f43a\"><p class=\"cl-50c3df04\"><span class=\"cl-50c01c48\">1,989</span></p></td><td class=\"cl-50c3f444\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">EBS</span></p></td><td class=\"cl-50c3f444\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">1.0E+001</span></p></td><td class=\"cl-50c3f444\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">6.8578E+004</span></p></td><td class=\"cl-50c3f444\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">9.6200360000000007E+000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-50c3f430\"><p class=\"cl-50c3df04\"><span class=\"cl-50c01c48\">1,989</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">EBS</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">1.0E+001</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">2.1313E+004</span></p></td><td class=\"cl-50c3f431\"><p class=\"cl-50c3df0e\"><span class=\"cl-50c01c48\">1.8179039E+001</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## Ex. 7: Visualize CPUE data in distribution map\n\nPacific cod catch-per-unit-effort estimates for NBS in 2021 and map constructed using [`akgfmaps`](https://github.com/afsc-gap-products/akgfmaps). \n\n\n::: {.cell tbl-cap='Ex. 7: Visualize CPUE data in distribution map. '}\n\n```{.r .cell-code}\n# res <- httr::GET(\n#   url = paste0(api_link, \"?offset=0&limit=10000\"), \n#   query = list(year = 2021, srvy = \"EBS\", species_code = 30060))\nres <- httr::GET(\n  url = paste0(api_link, '?q={\"year\":2021,\"srvy\":\"NBS\",\"species_code\":21720}'))\ndata_catch <- jsonlite::fromJSON(base::rawToChar(res$content))$items %>% \n  dplyr::select(stratum, station, cpue_kgkm2) \n\n# zero-fill data (imperfectly, but effective for this example)\nres <- httr::GET(\n  url = paste0(api_link, '?q={\"year\":2021,\"srvy\":\"NBS\"}offset=0&limit=10000'))\ndata_haul <- jsonlite::fromJSON(base::rawToChar(res$content))$items %>% \n  dplyr::select(stratum, station, latitude_dd, longitude_dd) %>%\n  dplyr::distinct()\n\ndata <- dplyr::left_join(data_haul, data_catch) %>% \n  dplyr::mutate(cpue_kgkm2 = ifelse(is.na(cpue_kgkm2), 0, cpue_kgkm2), \n                dplyr::across(dplyr::everything(), as.numeric)) \n\nflextable::flextable(data[1:3,]) %>% \n  flextable::theme_zebra()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-5335836e{}.cl-532bf5c4{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-532bf5ce{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-532fb31c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-532fc744{width:0.75in;background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-532fc74e{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-532fc758{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5335836e'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-532fc744\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5c4\">stratum</span></p></th><th class=\"cl-532fc744\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5c4\">station</span></p></th><th class=\"cl-532fc744\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5c4\">latitude_dd</span></p></th><th class=\"cl-532fc744\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5c4\">longitude_dd</span></p></th><th class=\"cl-532fc744\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5c4\">cpue_kgkm2</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">71</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\"></span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">63.70028</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">-171.0225</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">1.183039</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-532fc758\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">81</span></p></td><td class=\"cl-532fc758\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\"></span></p></td><td class=\"cl-532fc758\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">61.68600</span></p></td><td class=\"cl-532fc758\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">-173.0776</span></p></td><td class=\"cl-532fc758\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">13,256.716473</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">81</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\"></span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">61.34965</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">-172.2251</span></p></td><td class=\"cl-532fc74e\"><p class=\"cl-532fb31c\"><span class=\"cl-532bf5ce\">600.958261</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# devtools::install_github(\"afsc-gap-products/akgfmaps\", build_vignettes = TRUE)\nlibrary(akgfmaps)\n\nfigure <- akgfmaps::make_idw_map(\n  CPUE_KGHA = data$cpue_kgkm2, # calculates the same, regardless of units.  \n  LATITUDE = data$latitude_dd, \n  LONGITUDE = data$longitude_dd, \n  region = \"bs.north\", # Predefined EBS area\n  set.breaks = \"jenks\", # Gets Jenks breaks from classint::classIntervals()\n  in.crs = \"+proj=longlat\", # Set input coordinate reference system\n  out.crs = \"EPSG:3338\", # Set output coordinate reference system\n  grid.cell = c(20000, 20000), # 20x20km grid\n  key.title = \"Pacific Ocean perch\") # Include in the legend title\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[inverse distance weighted interpolation]\n[inverse distance weighted interpolation]\n```\n:::\n\n```{.r .cell-code}\nfigure$plot + \n  ggplot2::guides(fill=guide_legend(title = \"Pacific cod\\nCPUE (kg/km2)\"))\n```\n\n::: {.cell-output-display}\n![Ex. 7: Visualize CPUE data in distribution map. ](foss-api-r_files/figure-html/test-7-fig-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "foss-api-r_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/tabwid-1.1.3/tabwid.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}